import{j as t,L as Ae,r as i,O as go}from"./index-223872eb.js";import{G as J,D as bo}from"./utils-978ca1b9.js";import"./bootstrap.bundle.min-da4337cb.js";import{g as xo,a as To,s as Q,P as We,_ as s,c as Ue,b as ze,u as vo,d as yo,e as wo,f as Po,h as jo,i as Co,j as No,k as Ro,l as S,G as De,m as k,n as Mo}from"./Grow-6a941c12.js";import{a as Oo}from"./axios-4a70c6fc.js";import{M as $o}from"./MessageBlock-7a3fdb9b.js";import{u as Lo}from"./useDispatch-55f81504.js";function _o({title:o,bootstrap_icon_name:e}){const n=J();return t.jsx("nav",{className:"navbar navbar-expand-lg bg-body-tertiary",children:t.jsxs("div",{className:"container-fluid",children:[t.jsxs(Ae,{className:"navbar-brand",to:"/",children:[t.jsx("i",{className:`bi ${e} me-3`}),o]}),t.jsx("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:t.jsx("span",{className:"navbar-toggler-icon"})}),t.jsxs("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:[t.jsx("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0"}),t.jsx("p",{className:"p-0 m-0",children:n?`${n.surname} ${n.name[0]}.`:""})]})]})})}function Eo(o){return To("MuiTooltip",o)}const So=xo("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),m=So,ko=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","slotProps","slots","title","TransitionComponent","TransitionProps"];function Bo(o){return Math.round(o*1e5)/1e5}const Io=o=>{const{classes:e,disableInteractive:n,arrow:a,touch:p,placement:x}=o,N={popper:["popper",!n&&"popperInteractive",a&&"popperArrow"],tooltip:["tooltip",a&&"tooltipArrow",p&&"touch",`tooltipPlacement${Ue(x.split("-")[0])}`],arrow:["arrow"]};return Mo(N,Eo,e)},Fo=Q(We,{name:"MuiTooltip",slot:"Popper",overridesResolver:(o,e)=>{const{ownerState:n}=o;return[e.popper,!n.disableInteractive&&e.popperInteractive,n.arrow&&e.popperArrow,!n.open&&e.popperClose]}})(({theme:o,ownerState:e,open:n})=>s({zIndex:(o.vars||o).zIndex.tooltip,pointerEvents:"none"},!e.disableInteractive&&{pointerEvents:"auto"},!n&&{pointerEvents:"none"},e.arrow&&{[`&[data-popper-placement*="bottom"] .${m.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${m.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${m.arrow}`]:s({},e.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),[`&[data-popper-placement*="left"] .${m.arrow}`]:s({},e.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})})),Do=Q("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(o,e)=>{const{ownerState:n}=o;return[e.tooltip,n.touch&&e.touch,n.arrow&&e.tooltipArrow,e[`tooltipPlacement${Ue(n.placement.split("-")[0])}`]]}})(({theme:o,ownerState:e})=>s({backgroundColor:o.vars?o.vars.palette.Tooltip.bg:ze(o.palette.grey[700],.92),borderRadius:(o.vars||o).shape.borderRadius,color:(o.vars||o).palette.common.white,fontFamily:o.typography.fontFamily,padding:"4px 8px",fontSize:o.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:o.typography.fontWeightMedium},e.arrow&&{position:"relative",margin:0},e.touch&&{padding:"8px 16px",fontSize:o.typography.pxToRem(14),lineHeight:`${Bo(16/14)}em`,fontWeight:o.typography.fontWeightRegular},{[`.${m.popper}[data-popper-placement*="left"] &`]:s({transformOrigin:"right center"},e.isRtl?s({marginLeft:"14px"},e.touch&&{marginLeft:"24px"}):s({marginRight:"14px"},e.touch&&{marginRight:"24px"})),[`.${m.popper}[data-popper-placement*="right"] &`]:s({transformOrigin:"left center"},e.isRtl?s({marginRight:"14px"},e.touch&&{marginRight:"24px"}):s({marginLeft:"14px"},e.touch&&{marginLeft:"24px"})),[`.${m.popper}[data-popper-placement*="top"] &`]:s({transformOrigin:"center bottom",marginBottom:"14px"},e.touch&&{marginBottom:"24px"}),[`.${m.popper}[data-popper-placement*="bottom"] &`]:s({transformOrigin:"center top",marginTop:"14px"},e.touch&&{marginTop:"24px"})})),Ao=Q("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(o,e)=>e.arrow})(({theme:o})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:o.vars?o.vars.palette.Tooltip.bg:ze(o.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}));let B=!1,q=null,C={x:0,y:0};function I(o,e){return n=>{e&&e(n),o(n)}}const Wo=i.forwardRef(function(e,n){var a,p,x,N,Z,ee,oe,te,re,ne,se,ie,ae,le,pe,ce,ue,de,me;const F=vo({props:e,name:"MuiTooltip"}),{arrow:fe=!1,children:D,components:R={},componentsProps:f={},describeChild:Ve=!1,disableFocusListener:Ge=!1,disableHoverListener:he=!1,disableInteractive:He=!1,disableTouchListener:Ke=!1,enterDelay:ge=100,enterNextDelay:be=0,enterTouchDelay:Xe=700,followCursor:A=!1,id:Ye,leaveDelay:xe=0,leaveTouchDelay:qe=1500,onClose:Te,onOpen:ve,open:Je,placement:ye="bottom",PopperComponent:W,PopperProps:h={},slotProps:g={},slots:M={},title:T,TransitionComponent:Qe=De,TransitionProps:Ze}=F,we=yo(F,ko),d=i.isValidElement(D)?D:t.jsx("span",{children:D}),U=wo(),eo=U.direction==="rtl",[v,Pe]=i.useState(),[z,oo]=i.useState(null),O=i.useRef(!1),V=He||A,$=i.useRef(),L=i.useRef(),b=i.useRef(),je=i.useRef(),[to,Ce]=Po({controlled:Je,default:!1,name:"Tooltip",state:"open"});let u=to;const G=jo(Ye),y=i.useRef(),_=i.useCallback(()=>{y.current!==void 0&&(document.body.style.WebkitUserSelect=y.current,y.current=void 0),clearTimeout(je.current)},[]);i.useEffect(()=>()=>{clearTimeout($.current),clearTimeout(L.current),clearTimeout(b.current),_()},[_]);const Ne=r=>{clearTimeout(q),B=!0,Ce(!0),ve&&!u&&ve(r)},E=Co(r=>{clearTimeout(q),q=setTimeout(()=>{B=!1},800+xe),Ce(!1),Te&&u&&Te(r),clearTimeout($.current),$.current=setTimeout(()=>{O.current=!1},U.transitions.duration.shortest)}),H=r=>{O.current&&r.type!=="touchstart"||(v&&v.removeAttribute("title"),clearTimeout(L.current),clearTimeout(b.current),ge||B&&be?L.current=setTimeout(()=>{Ne(r)},B?be:ge):Ne(r))},Re=r=>{clearTimeout(L.current),clearTimeout(b.current),b.current=setTimeout(()=>{E(r)},xe)},{isFocusVisibleRef:Me,onBlur:ro,onFocus:no,ref:so}=No(),[,Oe]=i.useState(!1),$e=r=>{ro(r),Me.current===!1&&(Oe(!1),Re(r))},Le=r=>{v||Pe(r.currentTarget),no(r),Me.current===!0&&(Oe(!0),H(r))},_e=r=>{O.current=!0;const l=d.props;l.onTouchStart&&l.onTouchStart(r)},Ee=H,Se=Re,io=r=>{_e(r),clearTimeout(b.current),clearTimeout($.current),_(),y.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",je.current=setTimeout(()=>{document.body.style.WebkitUserSelect=y.current,H(r)},Xe)},ao=r=>{d.props.onTouchEnd&&d.props.onTouchEnd(r),_(),clearTimeout(b.current),b.current=setTimeout(()=>{E(r)},qe)};i.useEffect(()=>{if(!u)return;function r(l){(l.key==="Escape"||l.key==="Esc")&&E(l)}return document.addEventListener("keydown",r),()=>{document.removeEventListener("keydown",r)}},[E,u]);const lo=Ro(d.ref,so,Pe,n);!T&&T!==0&&(u=!1);const K=i.useRef(),po=r=>{const l=d.props;l.onMouseMove&&l.onMouseMove(r),C={x:r.clientX,y:r.clientY},K.current&&K.current.update()},w={},X=typeof T=="string";Ve?(w.title=!u&&X&&!he?T:null,w["aria-describedby"]=u?G:null):(w["aria-label"]=X?T:null,w["aria-labelledby"]=u&&!X?G:null);const c=s({},w,we,d.props,{className:S(we.className,d.props.className),onTouchStart:_e,ref:lo},A?{onMouseMove:po}:{}),P={};Ke||(c.onTouchStart=io,c.onTouchEnd=ao),he||(c.onMouseOver=I(Ee,c.onMouseOver),c.onMouseLeave=I(Se,c.onMouseLeave),V||(P.onMouseOver=Ee,P.onMouseLeave=Se)),Ge||(c.onFocus=I(Le,c.onFocus),c.onBlur=I($e,c.onBlur),V||(P.onFocus=Le,P.onBlur=$e));const co=i.useMemo(()=>{var r;let l=[{name:"arrow",enabled:!!z,options:{element:z,padding:4}}];return(r=h.popperOptions)!=null&&r.modifiers&&(l=l.concat(h.popperOptions.modifiers)),s({},h.popperOptions,{modifiers:l})},[z,h]),j=s({},F,{isRtl:eo,arrow:fe,disableInteractive:V,placement:ye,PopperComponentProp:W,touch:O.current}),Y=Io(j),ke=(a=(p=M.popper)!=null?p:R.Popper)!=null?a:Fo,Be=(x=(N=(Z=M.transition)!=null?Z:R.Transition)!=null?N:Qe)!=null?x:De,Ie=(ee=(oe=M.tooltip)!=null?oe:R.Tooltip)!=null?ee:Do,Fe=(te=(re=M.arrow)!=null?re:R.Arrow)!=null?te:Ao,uo=k(ke,s({},h,(ne=g.popper)!=null?ne:f.popper,{className:S(Y.popper,h==null?void 0:h.className,(se=(ie=g.popper)!=null?ie:f.popper)==null?void 0:se.className)}),j),mo=k(Be,s({},Ze,(ae=g.transition)!=null?ae:f.transition),j),fo=k(Ie,s({},(le=g.tooltip)!=null?le:f.tooltip,{className:S(Y.tooltip,(pe=(ce=g.tooltip)!=null?ce:f.tooltip)==null?void 0:pe.className)}),j),ho=k(Fe,s({},(ue=g.arrow)!=null?ue:f.arrow,{className:S(Y.arrow,(de=(me=g.arrow)!=null?me:f.arrow)==null?void 0:de.className)}),j);return t.jsxs(i.Fragment,{children:[i.cloneElement(d,c),t.jsx(ke,s({as:W??We,placement:ye,anchorEl:A?{getBoundingClientRect:()=>({top:C.y,left:C.x,right:C.x,bottom:C.y,width:0,height:0})}:v,popperRef:K,open:v?u:!1,id:G,transition:!0},P,uo,{popperOptions:co,children:({TransitionProps:r})=>t.jsx(Be,s({timeout:U.transitions.duration.shorter},r,mo,{children:t.jsxs(Ie,s({},fo,{children:[T,fe?t.jsx(Fe,s({},ho,{ref:oo})):null]}))}))}))]})}),Uo=Wo;function zo({tooltipOpen:o,text:e,icon:n,href:a}){return t.jsx("li",{className:"nav-item",children:t.jsx(Ae,{to:a,className:"nav-link py-3 border-bottom rounded-0",children:t.jsx("div",{className:"d-flex align-items-center justify-content-center",children:t.jsx(Uo,{title:t.jsx("div",{className:"fs-6",children:e}),placement:"right",children:t.jsx("i",{className:`bi ${n}`,style:{fontSize:"24px"}})})})})})}function Vo({elements:o}){const[e,n]=i.useState(!1),a=J();return t.jsxs("div",{className:"d-flex flex-column flex-shrink-0 bg-body-tertiary full-height",onMouseEnter:p=>{n(!0)},onMouseLeave:()=>{n(!1)},children:[t.jsx("ul",{className:"nav nav-pills nav-flush flex-column mb-auto text-center",children:o.map((p,x)=>t.jsx(zo,{text:p.text,icon:p.icon,tooltipOpen:e,href:p.href},x))}),t.jsxs("div",{className:"dropdown border-top",children:[t.jsx("a",{href:"#",className:"d-flex align-items-center justify-content-center p-3 link-body-emphasis text-decoration-none dropdown-toggle","data-bs-toggle":"dropdown","aria-expanded":"false",children:t.jsx("i",{className:"bi bi-person-circle",style:{fontSize:"24px"}})}),t.jsx("ul",{className:"dropdown-menu text-small shadow",children:a?t.jsx("li",{children:t.jsx("a",{className:"dropdown-item",href:"#",onClick:()=>{bo(),window.location.reload()},children:"Выход"})}):""})]})]})}function Go(o){Oo.interceptors.response.use(function(e){return e},function(e){return Promise.reject(e)})}function Zo(){const[o,e]=i.useState([{text:"Домашняя страница",icon:"bi-house",href:"/"}]);return Lo(),i.useEffect(()=>{Go();const n=J(),a=[];n&&(n.role.includes("teacher")&&a.push({text:"Журнал",icon:"bi-book",href:"/journal"}),n.role.some(p=>p.includes("add"))&&a.push({text:"Управление",icon:"bi-gear",href:"/admin"}),n.role.includes("submitor")&&a.push({text:"Соревнования",icon:"bi-trophy",href:"/contest"}),a.push({text:"Прочие функции",icon:"bi-card-list",href:"/other"})),e([...o,...a])},[]),t.jsxs(t.Fragment,{children:[t.jsx(_o,{title:"KysSys",bootstrap_icon_name:"bi-cpu"}),t.jsxs("div",{className:"d-flex full-height",children:[t.jsx("div",{className:"full-height",children:t.jsx(Vo,{elements:o})}),t.jsxs("div",{className:"flex-grow-1 overflowable mx-5",children:[t.jsx($o,{}),t.jsx(go,{})]})]})]})}export{Zo as default};
