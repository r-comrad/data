import{r as m,j as n}from"./index-2931db17.js";import{M as b,a as j,b as p}from"./Modal-be4b3969.js";import{g as c,F as S,E as x,o as f,p as h}from"./utils-26674dc9.js";import{T as _}from"./Table-b6de09e7.js";function T(){const[a,s]=m.useState([]),[u,i]=m.useState({});m.useEffect(()=>{c().then(e=>{s(e)})},[]);function l(e){u.id&&(e.id=u.id),h(e).then(()=>{c().then(t=>{s(t)})})}function d(e,t){s(t?[...a.sort((r,o)=>r[e]>o[e]?1:r[e]<o[e]?-1:0)]:[...a.sort((r,o)=>r[e]<o[e]?1:r[e]>o[e]?-1:0)])}return n.jsxs(n.Fragment,{children:[n.jsx(b,{title:"Предмет",connected_with:"subject_modal",children:n.jsx(S,{elements:[{name:"name",label:"Название",type:x.INPUT,settings:{}}],onSubmit:l,instance:u})}),n.jsx(j,{connected_with:"subject_modal",button_text:"Создать предмет",additionalClasses:"m-3",preOpen:()=>{i({})}}),n.jsx(_,{elements:a,table_fields:[{label:"Название",name:"name"}],onEdit:e=>{i(e),new p.Modal(document.getElementById("subject_modal"),{}).show()},Sort:d,NeedEdit:!0,NeedDelete:!0,onDelete:e=>{f(e).then(()=>{c().then(t=>{s(t)})})}})]})}export{T as default};
