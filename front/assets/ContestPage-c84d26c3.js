import{u as p,j as e,a as N,f as b,r as c}from"./index-cd8eea75.js";import{p as v,q as w,r as g}from"./utils-3d8f3b62.js";import{u as y}from"./useDispatch-2d3baabb.js";import{F as q,E as C}from"./Form-6fa2783b.js";import"./axios-4a70c6fc.js";import"./config-67b08cc3.js";import"./utils-978ca1b9.js";import"./Grow-1e5607ce.js";function E({contest:a,setCurrentQuestion:s,currentQuestion:i}){var l;const t=y(),d=p();return e.jsxs("div",{className:"d-flex flex-column h-100",children:[e.jsx("div",{className:"py-3 fs-3 fw-bold border-bottom",children:a.name}),e.jsx("div",{className:"py-3 flex-grow-1 overflow-auto border-bottom",children:e.jsx("ul",{className:"list-group",children:(l=a.questions)==null?void 0:l.map((r,n)=>e.jsx("li",{className:`list-group-item ${r.id==i?"active":""}`,children:e.jsx("a",{className:`text-decoration-none ${r.id==i?"text-white":"text-dark"}`,href:"#",onClick:()=>{s(r.id)},children:r.name})},n))})}),e.jsx("div",{className:"my-4",children:e.jsx("button",{className:"btn btn-primary",onClick:()=>{t(N({type:"success",text:"Вы успешно вышли из соревнования"})),d("/")},children:"Закончить соревнование"})})]})}function S({currentQuestion:a,GetQuestion:s,UpdateQuestion:i}){return e.jsx(e.Fragment,{children:a==-1?e.jsxs("div",{className:"h-100 d-flex justify-content-center align-items-center",children:[e.jsx("i",{className:"bi bi-arrow-left fs-1 me-2"}),e.jsx("h3",{className:"m-0",children:"Выберете задание из списка слева"})]}):e.jsxs("div",{className:"d-flex flex-column h-100",children:[e.jsxs("div",{className:" p-3 d-flex align-items-center border-bottom",children:[e.jsx("h3",{className:"fw-bold m-0 me-3",children:s().name}),s().answer?e.jsxs("p",{className:"text-secondary m-0",children:[e.jsx("i",{className:"bi bi-check-circle me-1"}),"Ответ сохранен"]}):null]}),e.jsx("div",{className:"p-3 flex-grow-1 border-bottom",dangerouslySetInnerHTML:{__html:s().legend}}),e.jsx("div",{className:"my-4 row",children:e.jsx("div",{className:"col-4",children:e.jsx(q,{elements:[{label:"Ответ",type:C.INPUT,name:"answer",settings:{}}],onSubmit:t=>{v(a,t.answer).then(()=>{i(!0)})},additionalClassesButton:s().answer?"btn-outline-primary":void 0,buttonText:s().answer?"Перезаписать ответ":"Отправить ответ",instance:{answer:s().answer?s().answer:null}})})})]})})}function U(){const a=b(),[s,i]=c.useState({}),[t,d]=c.useState(-1);c.useEffect(()=>{w(a.contest_id).then(n=>{i(n)})},[]);function l(){var n;return(n=s.questions)==null?void 0:n.find(o=>o.id==t)}function r(n=!1){var o;!t||t==-1||(o=s.questions)!=null&&o.find(m=>m.id==t).legend&&!n||g(t).then(m=>{var x,h,f;const u=(x=s.questions)==null?void 0:x.findIndex(j=>j.id==t);i({...s,questions:[...(h=s.questions)==null?void 0:h.slice(0,u),m,...(f=s.questions)==null?void 0:f.slice(u+1)]})})}return c.useEffect(()=>{r()},[t]),e.jsxs("div",{className:"row h-100",style:{maxWidth:"100%"},children:[e.jsx("div",{className:"col-2 border-end h-100 text-center",children:e.jsx(E,{contest:s,currentQuestion:t,setCurrentQuestion:d})}),e.jsx("div",{className:"col-10 h-100 overflow-auto",children:e.jsx(S,{currentQuestion:t,GetQuestion:l,UpdateQuestion:r})})]})}export{U as default};
