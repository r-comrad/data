import{r as m,j as n}from"./index-ac9c09ba.js";import{M as b,a as j}from"./Modal-122696de.js";import{f as c,F as p,E as S,n as f,o as x}from"./utils-a5a48fe5.js";import{T as h}from"./Table-5d1b32c1.js";import{b as E}from"./bootstrap.bundle.min-a4fb55f5.js";function y(){const[a,s]=m.useState([]),[u,i]=m.useState({});m.useEffect(()=>{c().then(t=>{s(t)})},[]);function l(t){u.id&&(t.id=u.id),x(t).then(()=>{c().then(e=>{s(e)})})}function d(t,e){s(e?[...a.sort((r,o)=>r[t]>o[t]?1:r[t]<o[t]?-1:0)]:[...a.sort((r,o)=>r[t]<o[t]?1:r[t]>o[t]?-1:0)])}return n.jsxs(n.Fragment,{children:[n.jsx(b,{title:"Предмет",connected_with:"subject_modal",children:n.jsx(p,{elements:[{name:"name",label:"Название",type:S.INPUT,settings:{}}],onSubmit:l,instance:u})}),n.jsx(j,{connected_with:"subject_modal",button_text:"Создать предмет",additionalClasses:"m-3",preOpen:()=>{i({})}}),n.jsx(h,{elements:a,table_fields:[{label:"Название",name:"name"}],onEdit:t=>{i(t),new E.Modal(document.getElementById("subject_modal"),{}).show()},Sort:d,NeedEdit:!0,NeedDelete:!0,onDelete:t=>{f(t).then(()=>{c().then(e=>{s(e)})})}})]})}export{y as default};
