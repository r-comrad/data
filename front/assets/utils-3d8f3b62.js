import{a as s}from"./axios-4a70c6fc.js";import{A as a}from"./config-67b08cc3.js";import{G as u}from"./utils-978ca1b9.js";function m({login:t,password:e}){return new Promise(async(n,i)=>{try{const o=await s.post(`${a}/login`,{login:t,password:e});n(o.data.user)}catch(o){i(o)}})}function p({teacher_id:t}){return new Promise(async e=>{const n=await s.get(`${a}/get/if/journal_table[id,grade_id[name],subject_id[name]/teacher_id=${t}`);e(n.data.journal_tables.map(i=>({id:i.id,grade:i.grade.name,subject:i.subject.name})))})}function _({id:t}){return new Promise(async e=>{const n=await s.get(`${a}/get/if/journal_table[id,(lesson[id,theme_id[name],date_val,(mark[id,student_id,mark_value,lesson_id])),grade_id[id,name,(grade_student[student_id[*]])]]/id=${t}`),i=n.data.journal_tables[0].lessons,o=n.data.journal_tables[0].grade.grade_students.map(r=>r.student);e({lessons:i,grade:o})})}function w({mark:t}){return new Promise(async e=>{if(t.mark_value==="")t.id?await s.post(`${a}/drop/mark`,{id:t.id}):await s.post(`${a}/drop/mark`,{student_id:t.student_id,lesson_id:t.lesson_id}),e({student_id:t.student_id,lesson_id:t.lesson_id,mark_value:t.mark_value});else{const n=await s.post(`${a}/post/mark`,{...t});e({id:n.data,student_id:t.student_id,lesson_id:t.lesson_id,mark_value:t.mark_value})}})}function f(){return new Promise(async t=>{const e=await s.get(`${a}/get/all/user`);t(e.data.users)})}function $(t){return new Promise(async()=>{await s.post(`${a}/drop/user`,{id:t})})}function g(t){return new Promise(async e=>{await s.post(`${a}/post/user`,t),e(t)})}function P(t){return new Promise(async()=>{const e={file:t,filename:t.name,index:"data"};await s.post(`${a}/upload/user`,e,{headers:{"Content-Type":"multipart/form-data"}})})}function y(){return new Promise(async t=>{const e=await s.get(`${a}/get/all/plan`);t(e.data.plans)})}function b(t){return new Promise(async()=>{await s.post(`${a}/drop/plan`,{id:t})})}function j(){return new Promise(async t=>{const e=await s.get(`${a}/get/all/subject`);t(e.data.subjects)})}function G(t){return new Promise(async e=>{let n={name:t.name,subject_id:Number(t.subject_id)},i={};t.file&&(n.file=t.file,n.filename=t.file.name,n.index="data",i.headers={"Content-Type":"multipart/form-data"}),t.id&&(n.id=t.id),await s.post(`${a}/post/plan`,n,i),e()})}function A(){return new Promise(async t=>{let n=(await s.get(`${a}/get/all/grade[*,(grade_student)]`)).data.grades.map(i=>(i.student=i.grade_students.map(o=>o.student_id),delete i.grade_students,i));t(n)})}function q(t){return new Promise(async e=>{t.student&&(t.many_to_many="replace",t.student=t.student.map(n=>Number(n))),t.is_group=!1,t.head_id=Number(t.head_id),console.log(t),await s.post(`${a}/post/grade`,t),e()})}function h(t){return new Promise(async()=>{await s.post(`${a}/drop/grade`,{id:t})})}function S(){return new Promise(async t=>{const e=await s.get(`${a}/get/all/journal_table`);t(e.data.journal_tables)})}function v(t){return new Promise(async e=>{await s.post(`${a}/drop/journal_table`,{id:t}),e()})}function D(t){return new Promise(async e=>{await s.post(`${a}/post/subject`,t),e()})}function C(t){return new Promise(async e=>{await s.post(`${a}/drop/subject`,{id:t}),e()})}function J(t){return new Promise(async e=>{const n=await s.get(`${a}/print_journal/${t.join(",")}`);e(`https://kusmirror.ru/${n.data}`)})}function U(){return new Promise(async t=>{const e=u(),n=await s.get(`${a}/get/if/competition_user[competition_id[]]/user_id=${e.id}`);t(n.data.competition_users.map(i=>i.competition))})}function x(t){return new Promise(async e=>{const n=await s.get(`${a}/get/if/competition/id=${t}`),i=await s.get(`${a}/get/if/competition_question[question_id[id,name]]/competition_id=${t}`),o=n.data.competitions[0];o.questions=i.data.competition_questions.map(r=>r.question),e(o)})}function N(t){return new Promise(async e=>{const n=u(),o=(await s.get(`${a}/get_question/${t}/${n.id}`)).data.question;e(o)})}function T(t,e){return new Promise(async n=>{if(e==="")return;const i=u();await s.post(`${a}/post/answer`,{question_id:t,user_id:i.id,value:e}),n()})}export{m as A,G as C,$ as D,_ as G,J as P,w as S,p as a,f as b,P as c,g as d,y as e,j as f,b as g,A as h,q as i,h as j,S as k,v as l,C as m,D as n,U as o,T as p,x as q,N as r};
