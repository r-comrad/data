import{r as i,j as t}from"./index-be40ab28.js";import{T as y}from"./Table-b477c3ef.js";import{b as g,E as s,c as M,M as a,D as N,d as I}from"./utils-e053d425.js";import{M as x}from"./Modal-60fb6456.js";import{M as b}from"./ModalButton-d354bf13.js";import{F as f}from"./Form-3c54cf79.js";import{G as C}from"./utils-978ca1b9.js";import{b as F}from"./bootstrap.bundle.min-ad4f528d.js";import{P as _}from"./Paginator-42b67d19.js";import"./axios-4a70c6fc.js";import"./Grow-f1dfb45a.js";function z(){const[n,o]=i.useState([]),[u,m]=i.useState({}),h=C(),[l,d]=i.useState(0);i.useEffect(()=>{g().then(e=>{o(e)})},[]);function E(e){switch(e){case"admin":return"Администратор";case"teacher":return"Преподаватель";case"student":return"Студент";case"submitor":return"Участник соревнований";default:return e}}function U(e){o(n.filter(r=>!e.includes(r.id))),N(e)}function j(e){e.school_id=h.school_id,u.id&&(e.id=u.id),I(e).then(()=>{g().then(r=>{o(r)})})}function P(e){m(e),new F.Modal(document.getElementById("user_modal"),{}).show()}function T(e,r){const S=n.sort((c,p)=>c[e]>p[e]?r?1:-1:c[e]<p[e]?r?-1:1:0);o([...S])}function w(){return n.slice(l*a,l*a+a)}return t.jsxs(t.Fragment,{children:[t.jsx(x,{connected_with:"user_modal",title:"Юзер",children:t.jsx(f,{elements:[{name:"name",label:"Имя",type:s.INPUT,settings:{required:!0}},{name:"surname",label:"Фамилия",type:s.INPUT,settings:{required:!0}},{name:"login",label:"Логин",type:s.INPUT,settings:{required:!0}},{name:"password",label:"Пароль",type:s.INPUT,settings:{required:!0}},{name:"role",label:"Роль",type:s.SELECT,settings:{options:[{value:"admin",text:"Администратор"},{value:"teacher",text:"Преподаватель"},{value:"student",text:"Студент"},{value:"submitor",text:"Участник соревнований"}],multiple:!0,required:!0}}],instance:u,onSubmit:j,buttonText:"Отправить"})}),t.jsx(b,{connected_with:"user_modal",additionalClasses:"m-3",preOpen:()=>{m({})},button_text:"Создание юзера"}),t.jsx(x,{connected_with:"multiple_users_modal",title:"Загрузка через файл",children:t.jsx(f,{elements:[{name:"file",label:"Файл",type:s.FILE,settings:{}}],onSubmit:e=>{M(e.file)},buttonText:"Отправить"})}),t.jsx(b,{connected_with:"multiple_users_modal",button_text:"Загрузить через файл"}),t.jsx(_,{max_page:n.length/a,current_page:l,onPageChange:e=>{d(e)}}),t.jsx(y,{elements:w(),additional_classes:"mt-3",table_fields:[{name:"name",label:"Имя"},{name:"surname",label:"Фамилия"},{name:"login",label:"Логин"},{name:"password",label:"Пароль"},{name:"role",label:"Роль",valueProcessing:e=>e.map(r=>E(r)).join(", "),width:20}],NeedEdit:!0,NeedDelete:!0,onEdit:P,onDelete:U,Sort:T}),t.jsx(_,{max_page:n.length/a,current_page:l,onPageChange:e=>{d(e)}})]})}export{z as default};
